var ve=Object.defineProperty;var ue=(s,e,t)=>e in s?ve(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var q=(s,e,t)=>ue(s,typeof e!="symbol"?e+"":e,t);import{a as Q,t as V}from"../chunks/disclose-version.6CFbjw_q.js";import{a4 as ce,an as Y,a5 as oe,a6 as he,a7 as de,U as d,g as n,a9 as a,a8 as v,aa as i}from"../chunks/runtime.CihvSwKW.js";import{s as u}from"../chunks/render.BEDXsWtL.js";import{d as pe}from"../chunks/events.Bnxny7e1.js";import{p as T}from"../chunks/proxy.DzkL99CH.js";var m=(s=>(s.Empty=" ",s.X="X",s.O="O",s))(m||{});class h{constructor(e=Array(9).fill(" ")){q(this,"tiles");this.tiles=e}static from_hash(e){let t=new h;for(let l=0;l<9;l++)t.tiles[l]=h.tile_from_hash(e%3),e=Math.floor(e/3);return t}static hash_tile(e){switch(e){case" ":return 0;case"X":return 1;case"O":return 2}}static tile_from_hash(e){switch(e){case 0:return" ";case 1:return"X";case 2:return"O"}return" "}hash(){let e=0;for(let t=0;t<9;t++)e+=h.hash_tile(this.tiles[t])*Math.pow(3,t);return e}invariant_hash(){const e=[[0,1,2,3,4,5,6,7,8],[2,5,8,1,4,7,0,3,6],[8,7,6,5,4,3,2,1,0],[6,3,0,7,4,1,8,5,2],[6,7,8,3,4,5,0,1,2],[2,1,0,5,4,3,8,7,6],[8,5,2,7,4,1,6,3,0],[0,3,6,1,4,7,2,5,8]];let t=[];for(const l of e){let r=0;for(let f=0;f<9;f++)r+=h.hash_tile(this.tiles[l[f]])*Math.pow(3,f);t.push(r)}return Math.min(...t)}empty(){let e=[];for(let t=0;t<9;t++)this.tiles[t]==" "&&e.push(t);return e}winner(){if(this.empty().length>5)return" ";const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let t of e)if(this.tiles[t[0]]==this.tiles[t[1]]&&this.tiles[t[1]]==this.tiles[t[2]]&&this.tiles[t[0]]!=" ")return this.tiles[t[0]];return" "}turn(){return this.empty().length%2==0?"O":"X"}act(e){let t=[...this.tiles];return t[e]=this.turn(),new h(t)}equals(e){for(let t=0;t<9;t++)if(this.tiles[t]!=e.tiles[t])return!1;return!0}}const p=class p{constructor(){q(this,"valueTable");this.valueTable={}}static getInstance(){return p.instance||(p.instance=new p,p.instance.evaluateRecursive(new h)),p.instance}evaluateRecursive(e){let t=e.invariant_hash();if(t in this.valueTable)return this.valueTable[t];switch(e.winner()){case"X":return this.valueTable[t]=1,1;case"O":return this.valueTable[t]=-1,-1;case" ":if(e.empty().length==0)return this.valueTable[t]=0,0}let l=[];for(let r of e.empty())l.push(this.evaluateRecursive(e.act(r)));if(e.turn()=="X"){let r=Math.max(...l);return this.valueTable[t]=r,r}else{let r=Math.min(...l);return this.valueTable[t]=r,r}}solve(e){let t=e.empty(),l=this.evaluateRecursive(e);for(let r of t)if(l==this.evaluateRecursive(e.act(r)))return r;return-1}};q(p,"instance");let A=p;var fe=(s,e)=>e(),me=(s,e)=>e(),we=(s,e)=>e(0),_e=(s,e)=>e(1),ye=(s,e)=>e(2),be=(s,e)=>e(3),ge=(s,e)=>e(4),ke=(s,e)=>e(5),qe=(s,e)=>e(6),Te=(s,e)=>e(7),Xe=(s,e)=>e(8),Oe=V('<div style="margin-bottom: 15px;" class="svelte-u8odn2"><button class="svelte-u8odn2">Reset</button> <button class="svelte-u8odn2">Swap</button></div> <div class="row svelte-u8odn2"><div class="square svelte-u8odn2"><p class="svelte-u8odn2"> </p></div> <div class="square svelte-u8odn2"><p class="svelte-u8odn2"> </p></div> <div class="square svelte-u8odn2"><p class="svelte-u8odn2"> </p></div></div> <div class="row svelte-u8odn2"><div class="square svelte-u8odn2"><p class="svelte-u8odn2"> </p></div> <div class="square svelte-u8odn2"><p class="svelte-u8odn2"> </p></div> <div class="square svelte-u8odn2"><p class="svelte-u8odn2"> </p></div></div> <div class="row svelte-u8odn2"><div class="square svelte-u8odn2"><p class="svelte-u8odn2"> </p></div> <div class="square svelte-u8odn2"><p class="svelte-u8odn2"> </p></div> <div class="square svelte-u8odn2"><p class="svelte-u8odn2"> </p></div></div> <div style="min-height: 30px; margin-top: 25px;" class="svelte-u8odn2"> </div>',1);function xe(s,e){ce(e,!0);let t=Y(T(new h)),l=Y("You are X"),r=Y(!0);const f=A.getInstance();function S(){d(t,T(new h)),n(r)?d(l,"You are X"):(d(t,T(n(t).act(f.solve(n(t))))),d(l,"You are O"))}function W(){d(r,!n(r)),S()}function c(P){if(n(t).winner()==m.Empty&&n(t).tiles[P]==m.Empty){let o=n(t).act(P);o.winner()==m.Empty&&o.empty().length>0&&(o=o.act(f.solve(o))),d(t,T(o)),o.winner()!=m.Empty?d(l,"The winner is "+o.winner()+"!"):o.empty().length==0&&d(l,"It's a draw!")}}var U=Oe(),X=oe(U),j=a(X);j.__click=[fe,S];var Z=v(j,2);Z.__click=[me,W],i(X);var O=v(X,2),w=a(O);w.__click=[we,c];var z=a(w),$=a(z,!0);i(z),i(w);var _=v(w,2);_.__click=[_e,c];var B=a(_),K=a(B,!0);i(B),i(_);var x=v(_,2);x.__click=[ye,c];var C=a(x),ee=a(C,!0);i(C),i(x),i(O);var M=v(O,2),y=a(M);y.__click=[be,c];var D=a(y),te=a(D,!0);i(D),i(y);var b=v(y,2);b.__click=[ge,c];var F=a(b),se=a(F,!0);i(F),i(b);var R=v(b,2);R.__click=[ke,c];var G=a(R),ae=a(G,!0);i(G),i(R),i(M);var E=v(M,2),g=a(E);g.__click=[qe,c];var H=a(g),ie=a(H,!0);i(H),i(g);var k=v(g,2);k.__click=[Te,c];var J=a(k),le=a(J,!0);i(J),i(k);var I=v(k,2);I.__click=[Xe,c];var L=a(I),re=a(L,!0);i(L),i(I),i(E);var N=v(E,2),ne=a(N,!0);i(N),he(()=>{u($,n(t).tiles[0]),u(K,n(t).tiles[1]),u(ee,n(t).tiles[2]),u(te,n(t).tiles[3]),u(se,n(t).tiles[4]),u(ae,n(t).tiles[5]),u(ie,n(t).tiles[6]),u(le,n(t).tiles[7]),u(re,n(t).tiles[8]),u(ne,n(l))}),Q(s,U),de()}pe(["click"]);var Me=V('<div style="margin: auto;"><!></div>');function Re(s){var e=Me(),t=a(e);xe(t,{}),i(e),Q(s,e)}export{Re as component};
