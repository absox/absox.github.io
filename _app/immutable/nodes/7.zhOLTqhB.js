var ct=Object.defineProperty;var nt=(s,t,e)=>t in s?ct(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var y=(s,t,e)=>nt(s,typeof t!="symbol"?t+"":t,e);import{a as P,t as Q}from"../chunks/disclose-version.tJYFEcM6.js";import{a3 as ut,am as I,a4 as _t,a5 as ot,a6 as ht,U as h,M as v,a8 as l,a7 as c,a9 as a}from"../chunks/runtime.DPaXgKMT.js";import{s as n}from"../chunks/render.BX8Nnrvl.js";import{d as pt}from"../chunks/events.DIqkH7Ji.js";import{p as x}from"../chunks/proxy.1gpJmmdU.js";var j=(s=>(s.Empty=" ",s.X="X",s.O="O",s))(j||{});class o{constructor(t=Array(9).fill(" ")){y(this,"tiles");this.tiles=t}static from_hash(t){let e=new o;for(let i=0;i<9;i++)e.tiles[i]=o.tile_from_hash(t%3),t=Math.floor(t/3);return e}static hash_tile(t){switch(t){case" ":return 0;case"X":return 1;case"O":return 2}}static tile_from_hash(t){switch(t){case 0:return" ";case 1:return"X";case 2:return"O"}return" "}hash(){let t=0;for(let e=0;e<9;e++)t+=o.hash_tile(this.tiles[e])*Math.pow(3,e);return t}invariant_hash(){const t=[[0,1,2,3,4,5,6,7,8],[2,5,8,1,4,7,0,3,6],[8,7,6,5,4,3,2,1,0],[6,3,0,7,4,1,8,5,2],[6,7,8,3,4,5,0,1,2],[2,1,0,5,4,3,8,7,6],[8,5,2,7,4,1,6,3,0],[0,3,6,1,4,7,2,5,8]];let e=[];for(const i of t){let r=0;for(let f=0;f<9;f++)r+=o.hash_tile(this.tiles[i[f]])*Math.pow(3,f);e.push(r)}return Math.min(...e)}empty(){let t=[];for(let e=0;e<9;e++)this.tiles[e]==" "&&t.push(e);return t}winner(){if(this.empty().length>5)return" ";const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let e of t)if(this.tiles[e[0]]==this.tiles[e[1]]&&this.tiles[e[1]]==this.tiles[e[2]]&&this.tiles[e[0]]!=" ")return this.tiles[e[0]];return" "}turn(){return this.empty().length%2==0?"O":"X"}act(t){let e=[...this.tiles];return e[t]=this.turn(),new o(e)}equals(t){for(let e=0;e<9;e++)if(this.tiles[e]!=t.tiles[e])return!1;return!0}}const p=class p{constructor(){y(this,"valueTable");this.valueTable={}}static getInstance(){return p.instance||(p.instance=new p,p.instance.evaluateRecursive(new o)),p.instance}evaluateRecursive(t){let e=t.invariant_hash();if(e in this.valueTable)return this.valueTable[e];switch(t.winner()){case"X":return this.valueTable[e]=1,1;case"O":return this.valueTable[e]=-1,-1;case" ":if(t.empty().length==0)return this.valueTable[e]=0,0}let i=[];for(let r of t.empty())i.push(this.evaluateRecursive(t.act(r)));if(t.turn()=="X"){let r=Math.max(...i);return this.valueTable[e]=r,r}else{let r=Math.min(...i);return this.valueTable[e]=r,r}}solve(t){let e=t.empty(),i=this.evaluateRecursive(t);for(let r of e)if(i==this.evaluateRecursive(t.act(r)))return r;return-1}};y(p,"instance");let Y=p;var ft=(s,t)=>t(),jt=(s,t)=>t(),dt=(s,t)=>t(0),mt=(s,t)=>t(1),qt=(s,t)=>t(2),wt=(s,t)=>t(3),kt=(s,t)=>t(4),gt=(s,t)=>t(5),yt=(s,t)=>t(6),xt=(s,t)=>t(7),bt=(s,t)=>t(8),Xt=Q('<div style="margin-bottom: 15px;" class="svelte-qtjlj1"><button class="svelte-qtjlj1">Reset</button> <button class="svelte-qtjlj1">Swap</button></div> <div class="row svelte-qtjlj1"><div class="square svelte-qtjlj1"><p class="svelte-qtjlj1"> </p></div> <div class="square svelte-qtjlj1"><p class="svelte-qtjlj1"> </p></div> <div class="square svelte-qtjlj1"><p class="svelte-qtjlj1"> </p></div></div> <div class="row svelte-qtjlj1"><div class="square svelte-qtjlj1"><p class="svelte-qtjlj1"> </p></div> <div class="square svelte-qtjlj1"><p class="svelte-qtjlj1"> </p></div> <div class="square svelte-qtjlj1"><p class="svelte-qtjlj1"> </p></div></div> <div class="row svelte-qtjlj1"><div class="square svelte-qtjlj1"><p class="svelte-qtjlj1"> </p></div> <div class="square svelte-qtjlj1"><p class="svelte-qtjlj1"> </p></div> <div class="square svelte-qtjlj1"><p class="svelte-qtjlj1"> </p></div></div> <div style="min-height: 30px; margin-top: 25px;" class="svelte-qtjlj1"> </div>',1);function Mt(s,t){ut(t,!0);let e=I(x(new o)),i=I("You are X"),r=I(!0);const f=Y.getInstance();function A(){h(e,x(new o)),v(r)?h(i,"You are X"):(h(e,x(v(e).act(f.solve(v(e))))),h(i,"You are O"))}function W(){h(r,!v(r)),A()}function u(N){if(v(e).winner()==j.Empty&&v(e).tiles[N]==j.Empty){let _=v(e).act(N);_.winner()==j.Empty&&_.empty().length>0&&(_=_.act(f.solve(_))),h(e,x(_)),_.winner()!=j.Empty?h(i,"The winner is "+_.winner()+"!"):_.empty().length==0&&h(i,"It's a draw!")}}var $=Xt(),b=_t($),F=l(b);F.__click=[ft,A];var Z=c(F,2);Z.__click=[jt,W],a(b);var X=c(b,2),d=l(X);d.__click=[dt,u];var U=l(d),S=l(U,!0);a(U),a(d);var m=c(d,2);m.__click=[mt,u];var V=l(m),B=l(V,!0);a(V),a(m);var M=c(m,2);M.__click=[qt,u];var z=l(M),tt=l(z,!0);a(z),a(M),a(X);var O=c(X,2),q=l(O);q.__click=[wt,u];var C=l(q),et=l(C,!0);a(C),a(q);var w=c(q,2);w.__click=[kt,u];var D=l(w),st=l(D,!0);a(D),a(w);var T=c(w,2);T.__click=[gt,u];var G=l(T),lt=l(G,!0);a(G),a(T),a(O);var R=c(O,2),k=l(R);k.__click=[yt,u];var H=l(k),at=l(H,!0);a(H),a(k);var g=c(k,2);g.__click=[xt,u];var J=l(g),it=l(J,!0);a(J),a(g);var E=c(g,2);E.__click=[bt,u];var K=l(E),rt=l(K,!0);a(K),a(E),a(R);var L=c(R,2),vt=l(L,!0);a(L),ot(()=>{n(S,v(e).tiles[0]),n(B,v(e).tiles[1]),n(tt,v(e).tiles[2]),n(et,v(e).tiles[3]),n(st,v(e).tiles[4]),n(lt,v(e).tiles[5]),n(at,v(e).tiles[6]),n(it,v(e).tiles[7]),n(rt,v(e).tiles[8]),n(vt,v(i))}),P(s,$),ht()}pt(["click"]);var Ot=Q('<div style="margin: auto;"><!></div>');function $t(s){var t=Ot(),e=l(t);Mt(e,{}),a(t),P(s,t)}export{$t as component};
