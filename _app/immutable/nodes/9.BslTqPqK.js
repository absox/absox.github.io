var nt=Object.defineProperty;var ut=(s,t,e)=>t in s?nt(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var q=(s,t,e)=>ut(s,typeof t!="symbol"?t+"":t,e);import{a as Q,t as V}from"../chunks/disclose-version.6CFbjw_q.js";import{a4 as ct,an as Y,a5 as ot,a6 as ht,a7 as pt,U as p,g as v,a9 as a,a8 as n,aa as i}from"../chunks/runtime.CihvSwKW.js";import{s as u}from"../chunks/render.BEDXsWtL.js";import{d as wt}from"../chunks/events.Bnxny7e1.js";import{p as T}from"../chunks/proxy.DzkL99CH.js";var f=(s=>(s.Empty=" ",s.X="X",s.O="O",s))(f||{});class h{constructor(t=Array(9).fill(" ")){q(this,"tiles");this.tiles=t}static from_hash(t){let e=new h;for(let l=0;l<9;l++)e.tiles[l]=h.tile_from_hash(t%3),t=Math.floor(t/3);return e}static hash_tile(t){switch(t){case" ":return 0;case"X":return 1;case"O":return 2}}static tile_from_hash(t){switch(t){case 0:return" ";case 1:return"X";case 2:return"O"}return" "}hash(){let t=0;for(let e=0;e<9;e++)t+=h.hash_tile(this.tiles[e])*Math.pow(3,e);return t}invariant_hash(){const t=[[0,1,2,3,4,5,6,7,8],[2,5,8,1,4,7,0,3,6],[8,7,6,5,4,3,2,1,0],[6,3,0,7,4,1,8,5,2],[6,7,8,3,4,5,0,1,2],[2,1,0,5,4,3,8,7,6],[8,5,2,7,4,1,6,3,0],[0,3,6,1,4,7,2,5,8]];let e=[];for(const l of t){let r=0;for(let m=0;m<9;m++)r+=h.hash_tile(this.tiles[l[m]])*Math.pow(3,m);e.push(r)}return Math.min(...e)}empty(){let t=[];for(let e=0;e<9;e++)this.tiles[e]==" "&&t.push(e);return t}winner(){if(this.empty().length>5)return" ";const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let e of t)if(this.tiles[e[0]]==this.tiles[e[1]]&&this.tiles[e[1]]==this.tiles[e[2]]&&this.tiles[e[0]]!=" ")return this.tiles[e[0]];return" "}turn(){return this.empty().length%2==0?"O":"X"}act(t){let e=[...this.tiles];return e[t]=this.turn(),new h(e)}equals(t){for(let e=0;e<9;e++)if(this.tiles[e]!=t.tiles[e])return!1;return!0}}const w=class w{constructor(){q(this,"valueTable");this.valueTable={}}static getInstance(){return w.instance||(w.instance=new w,w.instance.evaluateRecursive(new h)),w.instance}evaluateRecursive(t){let e=t.invariant_hash();if(e in this.valueTable)return this.valueTable[e];switch(t.winner()){case"X":return this.valueTable[e]=1,1;case"O":return this.valueTable[e]=-1,-1;case" ":if(t.empty().length==0)return this.valueTable[e]=0,0}let l=[];for(let r of t.empty())l.push(this.evaluateRecursive(t.act(r)));if(t.turn()=="X"){let r=Math.max(...l);return this.valueTable[e]=r,r}else{let r=Math.min(...l);return this.valueTable[e]=r,r}}solve(t){let e=t.empty(),l=this.evaluateRecursive(t);for(let r of e)if(l==this.evaluateRecursive(t.act(r)))return r;return-1}};q(w,"instance");let A=w;var mt=(s,t)=>t(),ft=(s,t)=>t(),dt=(s,t)=>t(0),_t=(s,t)=>t(1),yt=(s,t)=>t(2),bt=(s,t)=>t(3),gt=(s,t)=>t(4),kt=(s,t)=>t(5),qt=(s,t)=>t(6),Tt=(s,t)=>t(7),Xt=(s,t)=>t(8),Ot=V('<div style="margin-bottom: 15px;" class="svelte-1uoiwt8"><button class="svelte-1uoiwt8">Reset</button> <button class="svelte-1uoiwt8">Swap</button></div> <div class="row svelte-1uoiwt8"><div class="square svelte-1uoiwt8"><p class="svelte-1uoiwt8"> </p></div> <div class="square svelte-1uoiwt8"><p class="svelte-1uoiwt8"> </p></div> <div class="square svelte-1uoiwt8"><p class="svelte-1uoiwt8"> </p></div></div> <div class="row svelte-1uoiwt8"><div class="square svelte-1uoiwt8"><p class="svelte-1uoiwt8"> </p></div> <div class="square svelte-1uoiwt8"><p class="svelte-1uoiwt8"> </p></div> <div class="square svelte-1uoiwt8"><p class="svelte-1uoiwt8"> </p></div></div> <div class="row svelte-1uoiwt8"><div class="square svelte-1uoiwt8"><p class="svelte-1uoiwt8"> </p></div> <div class="square svelte-1uoiwt8"><p class="svelte-1uoiwt8"> </p></div> <div class="square svelte-1uoiwt8"><p class="svelte-1uoiwt8"> </p></div></div> <div style="min-height: 30px; margin-top: 25px;" class="svelte-1uoiwt8"> </div>',1);function xt(s,t){ct(t,!0);let e=Y(T(new h)),l=Y("You are X"),r=Y(!0);const m=A.getInstance();function S(){p(e,T(new h)),v(r)?p(l,"You are X"):(p(e,T(v(e).act(m.solve(v(e))))),p(l,"You are O"))}function W(){p(r,!v(r)),S()}function c(P){if(v(e).winner()==f.Empty&&v(e).tiles[P]==f.Empty){let o=v(e).act(P);o.winner()==f.Empty&&o.empty().length>0&&(o=o.act(m.solve(o))),p(e,T(o)),o.winner()!=f.Empty?p(l,"The winner is "+o.winner()+"!"):o.empty().length==0&&p(l,"It's a draw!")}}var U=Ot(),X=ot(U),j=a(X);j.__click=[mt,S];var Z=n(j,2);Z.__click=[ft,W],i(X);var O=n(X,2),d=a(O);d.__click=[dt,c];var z=a(d),$=a(z,!0);i(z),i(d);var _=n(d,2);_.__click=[_t,c];var B=a(_),K=a(B,!0);i(B),i(_);var x=n(_,2);x.__click=[yt,c];var C=a(x),tt=a(C,!0);i(C),i(x),i(O);var M=n(O,2),y=a(M);y.__click=[bt,c];var D=a(y),et=a(D,!0);i(D),i(y);var b=n(y,2);b.__click=[gt,c];var F=a(b),st=a(F,!0);i(F),i(b);var R=n(b,2);R.__click=[kt,c];var G=a(R),at=a(G,!0);i(G),i(R),i(M);var E=n(M,2),g=a(E);g.__click=[qt,c];var H=a(g),it=a(H,!0);i(H),i(g);var k=n(g,2);k.__click=[Tt,c];var J=a(k),lt=a(J,!0);i(J),i(k);var I=n(k,2);I.__click=[Xt,c];var L=a(I),rt=a(L,!0);i(L),i(I),i(E);var N=n(E,2),vt=a(N,!0);i(N),ht(()=>{u($,v(e).tiles[0]),u(K,v(e).tiles[1]),u(tt,v(e).tiles[2]),u(et,v(e).tiles[3]),u(st,v(e).tiles[4]),u(at,v(e).tiles[5]),u(it,v(e).tiles[6]),u(lt,v(e).tiles[7]),u(rt,v(e).tiles[8]),u(vt,v(l))}),Q(s,U),pt()}wt(["click"]);var Mt=V('<div style="margin: auto;"><!></div>');function Rt(s){var t=Mt(),e=a(t);xt(e,{}),i(t),Q(s,t)}export{Rt as component};
